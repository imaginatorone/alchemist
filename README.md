# Alchemist

Alchemist — прототип автономного музыкального клиента с единым поиском и офлайн-библиотекой. Он состоит из:

- **Backend (FastAPI + SQLite)** — авторизация по коду, управление библиотекой, поиск через yt-dlp.
- **Frontend (React + Vite + TypeScript)** — PWA-оболочка с минималистичным плеером и анимациями.
- **Десктоп/мобилка** — React UI можно упаковать в Electron/Tauri и PWA/React Native для офлайн-доступа и Discord Rich Presence.
- **Медиа-агрегатор** — отдельный Python-сервис для yt-dlp/официальных API, на текущем этапе встроен в backend как демонстрация.

## Быстрый старт (dev)

### Backend
1. Создай виртуальное окружение и установи зависимости:
   ```bash
   cd backend
   python -m venv .venv
   source .venv/bin/activate
   pip install -r requirements.txt
   ```
2. Запусти API:
   ```bash
   uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
   ```

### Frontend
1. Установи зависимости и запусти dev-сервер:
   ```bash
   cd frontend
   npm install
   npm run dev
   ```
2. API адрес настраивается в `frontend/src/config.ts`.

## Что сейчас работает
- Авторизация через почту + код (в деве код печатается в консоль и возвращается в ответе).
- Базовые модели пользователей/треков/библиотеки с уникальностью по `source + source_id`.
- Добавление трека в библиотеку и выдача списка треков с вложенными данными.
- Поиск по YouTube через yt-dlp без скачивания файлов.

## Хостинг и развёртывание
- **Backend**: любой VPS (1 vCPU/1 GB RAM) с Docker или `uvicorn` + `nginx` хватит для прототипа. Для глобального покрытия и обхода региональных ограничений ставь инстансы в нейтральных регионах (например, Сингапур/Франкфурт) и прячь ключи API в переменные окружения. Для продакшена — PostgreSQL вместо SQLite.
- **Хранение медиа**: объектное хранилище типа Cloudflare R2/Backblaze B2/S3-совместимое. 100–250 ГБ хватит на пилот; ценник ~5–10 USD/мес.
- **CDN**: Cloudflare/fastly для раздачи обложек/файлов и уменьшения задержек.
- **Фронтенд**: любой статики-хостинг (Netlify/Vercel/S3+CloudFront). Для PWA включи HTTPS и корректный `service worker`.
- **Десктоп**: пакуй React в Electron/Tauri; в Tauri придётся подключить Discord Activity SDK нативно.
- **Мобилка**: PWA (Safari/Chrome) или React Native/Expo. Для Rich Presence на мобилках используем серверного бота или встроенную Discord Activity.

## Краткое описание приложения
Alchemist ищет аудио сразу по нескольким источникам, даёт скачать/кешировать треки и синхронизировать библиотеку между устройствами. Минималистичный UI, настраиваемые темы/анимации и (в десктопе) Discord Rich Presence делают офлайн-плеер удобным на любой платформе.
